
p = require('libs.utils').prettyPrint
v = require "libs.varlen"

local packet_p = require 'libs.packet_parser'


function p_data_print(p_raw_data)
    local p_data =""
    for i=1, #p_raw_data do
        p_data = p_data .. string.format("%02x", string.byte(string.sub(p_raw_data, i, i))) .. " "
    end
    print(p_data)
end


-- test_string = "\x09\x0b\x00\x00\x00\x00\x00\xaa\xc3\x31"

packet = packet_p.parse(4,"\x17\x1f\xff\xff\xeb\x41\x74\x00\x01\x17\x01\x00\x3f\x2c\xf2\x91\x3f\x80\x00\x00\x3a\x9b\x6d\xb1"

)


--[[

0x02    OK      "\x14\x02\x12\x2f\x67\x61\x6d\x65\x6d\x6f\x64\x65\x20\x63\x72\x65\x61\x74\x69\x76\x65"
0x04    OK      "\x0c\x04\x05\x65\x6e\x5f\x75\x73\x0c\x00\x01\x7f\x01"
0x06    OK      "\x03\x06\x01\x02"
0x07            "\x0a\x07\x00\x00\x19\x00\x00\x0c\x00\xff\xff"
                "\x0e\x07\x00\x00\x20\x00\x00\x0b\x00\x01\x18\x01\x00\x00\x00"
                "\x0a\x07\x01\x00\x1e\x00\x00\x08\x00\xff\xff"
                "\x2d\x07\x01\x00\x00\x00\x00\x07\x00\x01\x14\x01\x00\x00\x0a\x00\x00\x09\x00\x04\x65\x6e\x63\x68\x0a\x00\x00\x00\x01\x02\x00\x03\x6c\x76\x6c\x00\x01\x02\x00\x02\x69\x64\x00\x10\x00\x00"
0x08    OK      "\x02\x08\x00"
0x09            "\x12\x09\x08\x4d\x43\x7c\x42\x72\x61\x6e\x64\x07\x76\x61\x6e\x69\x6c\x6c\x61"
0x0C    OK      "\x02\x0c\x01"
0x0B    OK      "\x09\x0b\x00\x00\x00\x00\x01\xce\xf5\x3d"
0x0D    OK      "\x1a\x0d\xc0\x54\xd9\x38\x7d\x3c\x08\xe8\x40\x57\x80\x00\x00\x00\x00\x00\x40\x71\x5c\xe9\xac\x1a\x11\x71\x01"
0x0E    OK      "\x22\x0e\xc0\x55\x39\xa6\x30\x7a\x54\x86\x40\x57\x80\x00\x00\x00\x00\x00\x40\x71\x44\x57\xef\x6c\xf3\xc3\xc2\x41\xcc\xd1\x42\x02\xcc\xd2\x01"
0x0F    OK      "\x0a\x0f\xc2\x25\x00\x08\x42\x35\x33\x37\x01"
0x14    OK      "\x0b\x14\x00\xff\xff\xeb\x01\x78\x00\x01\x15\x04"
        OK      "\x0b\x14\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00"
0x1A    OK      "\x03\x1a\x00\x05"
0x1B    OK      "\x05\x1b\x00\x2c\xff\xff"
                "\x09\x1b\x00\x27\x01\x5f\x40\x00\x04\x00"
0x1D    OK      "\x02\x1d\x00"
0x1F    OK      "\x17\x1f\xff\xff\xec\x01\x74\x00\x01\x19\x01\x00\x3f\x33\x65\xb8\x3f\x80\x00\x00\x3f\x79\xc8\x72"




]]